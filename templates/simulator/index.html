{% extends 'simulator/base.html' %}
{% load static %}

{% block content %}
<div class="fsa-simulator">
    <header>
        <h1>FSA SIM</h1>
        <div class="input-container">
            <label for="fsa-input">Input:</label>
            <input type="text" id="fsa-input" name="fsa-input">
        </div>
        <div class="controls">
            <button id="play-btn" class="control-btn">
                <img src="{% static 'img/play.svg' %}" alt="Play">
            </button>
            <button id="stop-btn" class="control-btn">
                <img src="{% static 'img/stop.svg' %}" alt="Stop">
            </button>
            <button id="fast-forward-btn" class="control-btn">
                <img src="{% static 'img/fast_forward.svg' %}" alt="Fast Forward">
            </button>
        </div>
    </header>
    
    <main>
        <div class="tools-panel">
            <div class="tool" id="state-tool">
                <div class="state-node">S</div>
            </div>
            <div class="tool" id="accepting-state-tool">
                <div class="accepting-state-node">S</div>
            </div>
            <div class="tool" id="edge-tool">
                <div class="edge-icon">‚ûö</div>
            </div>
            <div class="tool" id="delete-tool">
                <div class="delete-icon">üóëÔ∏è</div>
            </div>
        </div>
        
        <div id="fsa-canvas">
            <!-- FSA graph will be drawn here -->
        </div>
        
        <div class="info-panel">
            <div class="alphabet-info">
                <h3>Alphabet:</h3>
                <p>Œ£ = { }</p>
            </div>
            <div class="fsa-properties">
                <div class="property">
                    <span>Connected:</span>
                    <span class="checkmark">‚úì</span>
                </div>
                <div class="property">
                    <span>Deterministic:</span>
                    <span class="checkmark">‚úì</span>
                </div>
            </div>
            <button id="show-table-btn">Show T table</button>
        </div>
    </main>
    
    <!-- Modal for setting edge symbol -->
    <div id="edge-symbol-modal" class="modal">
        <div class="modal-content">
            <h3>Enter Symbols:</h3>
            <div id="symbol-inputs-container">
                <input type="text" class="symbol-input" maxlength="1">
            </div>
            <button id="add-symbol-input">+ Add Symbol</button>
            <div class="modal-buttons">
                <button id="confirm-symbol-btn">Confirm</button>
                <button id="cancel-symbol-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- State inline editor -->
    <div id="state-inline-editor" class="inline-editor" style="display: none;">
        <div class="inline-editor-content">
            <div class="inline-editor-header">
                <h3>Edit State</h3>
                <span id="close-inline-editor" class="close-btn">x</span>
            </div>
            <input type="text" id="inline-state-label-input" class="form-control">
            <div class="checkbox-group">
                <label for="inline-accepting-state-checkbox">Accepting</label>
                <input type="checkbox" id="inline-accepting-state-checkbox">
            </div>
            <div class="checkbox-group">
                <label for="inline-starting-state-checkbox">Starting</label>
                <input type="checkbox" id="inline-starting-state-checkbox">
            </div>
        </div>
    </div>

    <!-- Edge inline editor -->
    <div id="edge-inline-editor" class="inline-editor" style="display: none;">
        <div class="inline-editor-content">
            <div class="inline-editor-header">
                <h3>Edit Edge</h3>
                <span id="close-edge-editor" class="close-btn">x</span>
            </div>
            <div class="form-group">
                <label>Symbols:</label>
                <div id="edge-symbols-edit-container">
                    <!-- Inputs will be added dynamically -->
                </div>
                <button id="add-symbol-edit-btn">+ Add Symbol</button>
            </div>
        </div>
    </div>

</div>
{% endblock %}